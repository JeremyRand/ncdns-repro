version: '0.0.2'
git_url:  https://github.com/namecoin/safetlsa.git
git_hash: '4954a0bb45dd911bd39a750a5c1aafe1ca8bbb44'
filename: '[% project %]-[% c("version") %]-[% c("var/osname") %]-[% c("var/build_id") %].tar.gz'

build: '[% c("projects/go/var/build_go_lib") %]'

var:
  container:
    use_container: 1
  go_lib: github.com/namecoin/safetlsa
  go_lib_deps:
    - github.com,miekg,dns
    - github.com,namecoin,x509-signature-splice
    - ncdns
  build_go_lib_pre: |
    export CGO_ENABLED=0

input_files:
  - project: container-image
  - name: go
    project: go
  - name: github.com,miekg,dns
    project: github.com,miekg,dns
  - name: github.com,namecoin,x509-signature-splice
    project: github.com,namecoin,x509-signature-splice
  - name: ncdns
    project: ncdns
    # Build ncdns as a library, not an executable.
    # TODO: refactor this once our build_go_lib executable patch is merged by upstream Tor
    var:
      go_lib_no_output: 0
