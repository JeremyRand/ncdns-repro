#version: 0.0.8
git_url: https://github.com/namecoin/ncdns.git
# Using latest master branch because we need the RPC timeout feature.  Once
# it's in a tagged release, we'll go back to using a version tag here.
#git_hash: 'v[% c("version") %]'
git_hash: '006f537e01cf20db01b18e399ed51f57211db91c'
filename: '[% project %]-[% c("version") %]-[% c("var/osname") %]-[% c("var/build_id") %].tar.gz'

var:
  container:
    use_container: 1
  go_lib_deps:
    - github.com,golang,groupcache
    - github.com,hlandau,degoutils
    - github.com,hlandau,dexlogconfig
    - github.com,hlandau,ncbtcjsontypes
    - github.com,hlandauf,btcjson
    - github.com,kr,pretty
    - github.com,miekg,dns
    - github.com,namecoin,tlsrestrictnss
    - github.com,namecoin,x509-signature-splice
    - gopkg.in,hlandau,madns.v1
    - gopkg.in,hlandau,easyconfig.v1
    - gopkg.in,hlandau,service.v2
    - golang.org,x,net
  go_lib_no_output: 1

targets:
  linux:
    var:
      cgo: 1
  linux-i686:
    var:
      arch_deps:
        - libcap-dev:i386
  linux-x86_64:
    var:
      arch_deps:
        - libcap-dev
  osx-x86_64:
    var:
      cgo: 0
  windows:
    var:
      go_lib_deps:
        - github.com,golang,groupcache
        - github.com,hlandau,degoutils
        - github.com,hlandau,dexlogconfig
        - github.com,hlandau,ncbtcjsontypes
        - github.com,hlandauf,btcjson
        - github.com,kr,pretty
        - github.com,miekg,dns
        - github.com,namecoin,x509-signature-splice
        - gopkg.in,hlandau,madns.v1
        - gopkg.in,hlandau,easyconfig.v1
        - gopkg.in,hlandau,service.v2
        - golang.org,x,net
        - golang.org,x,sys
      cgo: 0

input_files:
  - project: container-image
  - name: go
    project: go
  - name: '[% c("var/compiler") %]'
    project: '[% c("var/compiler") %]'
    enable: '[% c("var/cgo") %]'
  - name: binutils
    project: binutils
    enable: '[% c("var/linux") && c("var/cgo") %]'
  - name: github.com,hlandau,xlog
    project: github.com,hlandau,xlog
  - name: github.com,hlandau,dexlogconfig
    project: github.com,hlandau,dexlogconfig
  - name: gopkg.in,hlandau,easyconfig.v1
    project: gopkg.in,hlandau,easyconfig.v1
  - name: gopkg.in,hlandau,service.v2
    project: gopkg.in,hlandau,service.v2
  - name: github.com,golang,groupcache
    project: github.com,golang,groupcache
  - name: github.com,hlandau,ncbtcjsontypes
    project: github.com,hlandau,ncbtcjsontypes
  - name: github.com,hlandauf,btcjson
    project: github.com,hlandauf,btcjson
  - name: github.com,miekg,dns
    project: github.com,miekg,dns
  - name: github.com,namecoin,tlsrestrictnss
    project: github.com,namecoin,tlsrestrictnss
  - name: github.com,namecoin,x509-signature-splice
    project: github.com,namecoin,x509-signature-splice
  - name: gopkg.in,hlandau,madns.v1
    project: gopkg.in,hlandau,madns.v1
  - name: github.com,kr,pretty
    project: github.com,kr,pretty
  - name: github.com,hlandau,degoutils
    project: github.com,hlandau,degoutils
  - name: golang.org,x,net
    project: golang.org,x,net
  - name: golang.org,x,sys
    project: golang.org,x,sys
    enable: '[% c("var/windows") %]'
